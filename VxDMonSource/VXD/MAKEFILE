OBJECTS = vxdmon.obj

copy:	vxdmhlp.vxd
	copy vxdmhlp.vxd ..\gui\.
	copy vxdmhlp.vxd ..\gui\windebug\.

vxdmhlp.vxd:	$(OBJECTS) vxdmon.d40
	D:\98ddk\BIN\LINK.EXE @<<
-VXD -OUT:VXDMHLP.VXD -MAP
-DEBUG -DEBUGTYPE:MAP
-DEF:VXDMON.D40
-MERGE:.data=_LDATA -MERGE:.bss=_LDATA -MERGE:_PDATA=_PTEXT
-COMMENT:"VXDMON VXD"
$(OBJECTS)
<<
	c:\vtd95\BIN\SETHDR -x $@
	C:\WINICE95\MSYM.EXE VXDMON.map

.asm.obj:
	set ML=-I\ddk\inc32 -I\vtd95\lib\include -coff -DBLD_COFF -DIS_32 -nologo -W3 -Zd -c -Cx -DMASM6 -DINITLOG -DDEBLEVEL=1 -DDEBUG -Fl
	ml -Fo$*.obj $<
	editbin -section:_ITEXT,cer!w!ia4 -section:_LTEXT,cer!w!ia4 -section:_TLS,cer!w!ia4 $*.obj



VXDMON.d40: 
	copy <<VXDMON.d40 nul
VXD VXDMON DYNAMIC
SEGMENTS
	_LPTEXT		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
	_LTEXT		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
	_LDATA		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
	_TEXT		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
	_DATA		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
	CONST		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
	_TLS		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
	_BSS		CLASS 'LCODE'   PRELOAD NONDISCARDABLE
        _MSGTABLE	CLASS 'MCODE'	PRELOAD NONDISCARDABLE IOPL
        _MSGDATA	CLASS 'MCODE'	PRELOAD NONDISCARDABLE IOPL
        _IMSGTABLE	CLASS 'MCODE'	PRELOAD DISCARDABLE IOPL
        _IMSGDATA	CLASS 'MCODE'	PRELOAD DISCARDABLE IOPL
        _ITEXT		CLASS 'ICODE'   DISCARDABLE
	_IDATA		CLASS 'ICODE'   DISCARDABLE
	_PTEXT		CLASS 'PCODE'   NONDISCARDABLE
	_PDATA		CLASS 'PDATA'   NONDISCARDABLE SHARED
	_STEXT		CLASS 'SCODE'   RESIDENT
	_SDATA		CLASS 'SCODE'   RESIDENT
	_DBOSTART	CLASS 'DBOCODE' PRELOAD NONDISCARDABLE CONFORMING
	_DBOCODE	CLASS 'DBOCODE' PRELOAD NONDISCARDABLE CONFORMING
	_DBODATA	CLASS 'DBOCODE' PRELOAD NONDISCARDABLE CONFORMING
	_16ICODE	CLASS '16ICODE' PRELOAD DISCARDABLE
	_RCODE		CLASS 'RCODE'
EXPORTS
	VXDMHLP_DDB
<<


vxdmon.obj:	vxdmon.asm vxdmon.inc

